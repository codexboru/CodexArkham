<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Offene Positionen – Resonanz</title>
  <style>
    body {
      background-color: #0f0f0f;
      color: #e0e0e0;
      font-family: monospace;
      padding: 2em;
    }
    h1 {
      color: #ffcc00;
    }
    .position {
      border-bottom: 1px dashed #444;
      margin-bottom: 1em;
      padding-bottom: 1em;
    }
  </style>
</head>
<body>
  <h1>🜁 Offene Positionen</h1>
  <div id="positions">Lade Resonanzdaten...</div>

  <script>
    const apiKey = 'xHeaUN17PcZA70BIgoIzcVsNg8ujhANmHUPzoMZMQGZn9is3LX57DsxSC24aM5Mv'; // 🔑 Nur API-Key, kein Secret nötig
    const endpoint = 'https://fapi.binance.com/fapi/v2/account';

    fetch(endpoint, {
      method: 'GET',
      headers: {
        'X-MBX-APIKEY': apiKey
      }
    })
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById('positions');
      container.innerHTML = '';

      data.positions.forEach(pos => {
        if (parseFloat(pos.positionAmt) !== 0) {
          const entry = document.createElement('div');
          entry.className = 'position';
          entry.innerHTML = `
            <strong>${pos.symbol}</strong><br>
            🜂 Menge: ${pos.positionAmt}<br>
            🜃 Einstiegspreis: ${pos.entryPrice}<br>
            🜄 P&L: ${parseFloat(pos.unRealizedProfit).toFixed(2)} USDT<br>
            🜁 Liquidationspreis: ${pos.liquidationPrice}
          `;
          container.appendChild(entry);
        }
      });

      if (container.innerHTML === '') {
        container.innerHTML = 'Keine offenen Positionen – der Spiegel ruht.';
      }
    })
    .catch(error => {
      document.getElementById('positions').innerText = 'Fehler beim Laden der Resonanzdaten.';
      console.error('Resonanzfehler:', error);
    });
  </script>
</body>
</html>
